---
title: "1.1) Structuring the study area"
author: "Hugo FlÃ¡vio"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{1.1) Structuring the study area}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Index

1. [Preparing your data](a-0_workspace_requirements.html)
    1. [__Structuring the study area__](a-1_study_area.html)
    1. [Creating a distances matrix](a-2_distances_matrix.html)
1. [explore()](b-0_explore.html)
    1. [From raw to movements](b-1_explore_processes.html)
    1. [Inspecting the explore() results](b-2_explore_results.html)
1. [migration()](c-0_migration.html)
    1. [Processes behind migration()](c-1_migration_processes.html)
    1. [Inspecting the migration() results](c-2_migration_results.html)
    1. [Manual mode in migration()](c-3_migration_manual_mode.html)
1. [residency()](d-0_residency.html)
    1. [Processes behind residency()](d-1_residency_processes.html)
    1. [Inspecting the residency() results](d-2_residency_results.html)
1. [Errors and messages](e-0_messages.html)

## From the field to the computer

To be able to process your data, actel must understand how your study area works. To do this, actel relies on two things: the study area sections and the receiver arrays.

Here is a visual example of a study area with an overlay of the respective arrays and sections:

<img src="study_area.png" alt="drawing" width="680"/>


### Sections

The sections divide your study area in big blocks, for which you would like specific metrics to be calculated. For example, if your fish must cross a river and a fjord before reaching the end of the study area, then your sections will likely be "River" and "Fjord". In the example above, there are three sections: River, Fjord and Sea.

When you type the sections argument into the `migration()` function, you should order them in the order that you expect your fish will cross the sections. For example, if you expect your fish to move from the river to a fjord and ultimately to the sea (and you have receiver  arrays in all these sections), then `sections = c("River", "Fjord", "Sea")`. In the other hand, if you expect your fish to migrate upstream, then `sections = c("Sea", "Fjord", "River")`.

If you are running a `residency()` analysis, the order of the sections is not relevant (except for plotting purposes).

### Arrays

The receiver arrays are tightly linked to the study sections. An array called "River1" is expected to belong to section "River", an array called "Fjord3" is expected to belong to section "Fjord", and so forth. Array names **must** be an exact copy of the section they belong to, plus the number of the array. The connectivity between the arrays is determined either by their order of appearance in the _spatial.csv_ file, __or__ by a _spatial.txt_ file. Therefore, it is **very important** that you structure your arrays correctly.

#### Avoid overlapping arrays

When a fish moves from one array to another, a new movement event is created (you will learn more about movement events later on). This means that, if you have two receivers close to each other, but listed in two different arrays, you can end up with many 'false' movement events (i.e. the fish is just standing still within range of both arrays). Here is an example:

```{r, echo=FALSE, results='asis'}
load("badmovements.Rdata")
knitr::kable(badmovements[20:25,1:7])
```

Stations 15 and 17 are very close to each other, but were placed in different arrays. That in turn led to the creation of numerous movement events with only one detection, with nearly no time travelling between them. This fish ended up having 58 movement events, during most of which it was most likely just standing still.

As a rule of thumb, if two receivers' ranges are likely to overlap, you should consider assigning them to the same array:

<img src="arrays_good.svg" alt="drawing" width="330"/> <img src="arrays_bad.svg" alt="drawing" width="330"/>

#### Rivers with multiple parallel channels

If your study area includes multiple pathways that the fish may take, you must tell actel how to connect the arrays. By default, arrays are sorted in a linear order according to the spatial.csv file. To instruct actel to act otherwise, you must create a '**spatial.txt**' file. The spatial.txt file is very simple; all you need to do is connect your arrays with arrows. Here is an example:

```
River1 -- River2 -- River3 -- Fjord -- Sea1 -- Sea2 -- Sea3
River1 -- River4 -- River5 -- Fjord
River4 -- River6 -- Fjord
```

This will allow actel to properly structure your study area, and correctly estimate efficiency values for each array.

[You can learn more about spatial.txt files here](#a-0_workspace_requirements.html#optional-spatial.txt-file)

Now you know how to organise your study area in a way that actel will understand!

**<a href="javascript:history.back()">Return to previous page</a>**

[Back to top.](#)